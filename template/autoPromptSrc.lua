return function(a)local b=a.Services;local c=a.Tabs;local d=a.References;local e=a.Library;local f=a.Options;local g=a.Unloader;local h=a.AutoPromptConfig;if h.Enabled~=true then return end;local i={}local function j(k)if k then i[#i+1]=k end end;local l={on=false,con=nil,conAdd=nil,conRem=nil,lastFire=0,prompts={}}local function m(n)if n and n:IsA("ProximityPrompt")then l.prompts[n]=true end end;local function o(n)if l.prompts[n]then l.prompts[n]=nil end end;local function p()if not d.humanoidRootPart then return end;local q=os.clock()local r=f.Proximity_Delay.Value;if r>0 and q-l.lastFire<r then return end;local s=f.Proximity_Name.Value:lower()local t=f.Proximity_Radius.Value^2;local u=d.humanoidRootPart.Position;local v=f.Proximity_Hold.Value;local w,x;for y in next,l.prompts do if y.Parent and y.Enabled then if s==""or y.ObjectText:lower():find(s,1,true)or y.Name:lower():find(s,1,true)then local z=y.Parent;local A=z:IsA("BasePart")and z or z:FindFirstChildWhichIsA("BasePart")if A then local B=A.Position-u;local C=B.X*B.X+B.Y*B.Y+B.Z*B.Z;if C<=t and(not x or C<x)then w,x=y,C end end end end end;if w then local D=v>0 and v or w.HoldDuration;pcall(fireproximityprompt,w,D,true)l.lastFire=q end end;local E=c.Main:AddRightGroupbox("Auto Proximity","zap")E:AddToggle("Proximity_Enable",{Text="Auto ProximityPrompt",Default=false,Callback=function(F)l.on=F;if F then l.lastFire=0;for G,B in ipairs(workspace:GetDescendants())do m(B)end;l.conAdd=j(workspace.DescendantAdded:Connect(m))l.conRem=j(workspace.DescendantRemoving:Connect(o))l.con=task.spawn(function()while l.on do pcall(p)task.wait(0.1)end end)else l.con=nil;if l.conAdd then l.conAdd:Disconnect()end;if l.conRem then l.conRem:Disconnect()end;l.conAdd=nil;l.conRem=nil;l.prompts={}end end})if h.ProximityName then E:AddInput("Proximity_Name",{Text="Prompt Name Filter",Placeholder="(blank = all)",Finished=false,Callback=function(H)f.Proximity_Name.Value=tostring(H or"")end})else f.Proximity_Name.Value=tostring("")end;if h.ProximityRadius.Enabled then E:AddSlider("Proximity_Radius",{Text="Radius",Min=h.ProximityRadius.Min or 2,Max=h.ProximityRadius.Max or 60,Default=h.ProximityRadius.Default or 14,Rounding=h.ProximityRadius.Rounding or 0,Callback=function(H)f.Proximity_Radius.Value=tonumber(H)or 14 end})else f.Proximity_Radius.Value=12 end;if h.ProximityDelay.Enabled then E:AddSlider("Proximity_Delay",{Text="Delay",Min=h.ProximityDelay.Min or 0,Max=h.ProximityDelay.Max or 3,Default=h.ProximityDelay.Default or 0.3,Rounding=h.ProximityDelay.Rounding or 1,Callback=function(H)f.Proximity_Delay.Value=tonumber(H)or 0.3 end})else f.Proximity_Delay.Value=0.3 end;if h.ProximityHold.Enabled then E:AddSlider("Proximity_Hold",{Text="Hold Time",Min=h.ProximityHold.Min or 0,Max=h.ProximityHold.Max or 5,Default=h.ProximityHold.Default or 0,Rounding=h.ProximityHold.Rounding or 2,Callback=function(H)f.Proximity_Hold.Value=tonumber(H)or 0 end})else f.Proximity_Hold.Value=0 end;if g then g:Register(function()for I=#i,1,-1 do local J=i[I]i[I]=nil;pcall(function()if J and J.Disconnect then J:Disconnect()end end)end end)end;return{}end
