return function(a)local b=a.Services;local c=a.Tabs;local d=a.References;local e=a.Library;local f=a.Toggles;local g=a.Options;local h=a.Unloader;local i=a.quickReset;local j=a.startNoclip;local k=a.stopNoclip;local l=a.PlayerUtilsConfig;if l.Enabled~=true then return end;local m={}local function n(o)if o then m[#m+1]=o end end;local p=c.Player:AddRightGroupbox("Utils","lightbulb")if l.NoClip then p:AddToggle("NoclipEnabled",{Text="NoClip",Default=false,Tooltip="Walk through any structures"}):AddKeyPicker("NoclipKey",{Default="N",SyncToggleState=true,Mode="Toggle"})f.NoclipEnabled:OnChanged(function()if f.NoclipEnabled.Value then Helpers.startNoclip()e:Notify("NoClip enabled.",2)else Helpers.stopNoclip()e:Notify("NoClip disabled.",2)end end)end;if l.Desync then p:AddToggle("DesyncEnabled",{Text="Desync",Default=false,Tooltip="Perform movements and actions client-side without server recognition until re-synced"}):AddKeyPicker("DesyncKey",{Default=nil,SyncToggleState=true,Mode="Toggle"})local q=type(server_desync)=="function"local r=type(setfflag)=="function"local s=false;local t=false;f.DesyncEnabled:OnChanged(function()if t then return end;local u=f.DesyncEnabled.Value;if q then server_desync(u)e:Notify("Server Desync "..(u and"enabled."or"disabled."),2)return end;if not r then e:Notify("Desync not available (no server_desync / setfflag in this executor).",3)if u then t=true;f.DesyncEnabled:SetValue(false)t=false end;return end;if u and not s then s=true;t=true;f.DesyncEnabled:SetValue(false)t=false;e:Notify("FFlag desync uses NextGenReplicatorEnabledWrite4.\n".."It is unstable and potentially detectable.\n\n".."Click the toggle again if you still want to enable it.",6)return end;local v=u and"true"or"false"local w,x=pcall(function()setfflag("NextGenReplicatorEnabledWrite4",v)end)if not w then e:Notify("Failed to apply FFlag desync: "..tostring(x),3)t=true;f.DesyncEnabled:SetValue(false)t=false;return end;if u then e:Notify("FFlag Desync enabled (use with caution).",4)else e:Notify("FFlag Desync disabled.",2)end end)end;if l.AutoUseTool then local function y()if not d.character or not d.character.Parent then return nil end;for z,A in ipairs(d.character:GetChildren())do if A:IsA("Tool")then return A end end end;p:AddToggle("AutoUseTool",{Text="AutoUse Tool",Default=false,Tooltip="Automatically activates your equipped tool"}):AddKeyPicker("AutoUseKey",{Default=nil,SyncToggleState=true,Mode="Toggle"})local B=false;local C=nil;C=n(b.RunService.Heartbeat:Connect(function()local D=(f.AutoUseTool and f.AutoUseTool.Value)==true;if D~=B then B=D;e:Notify(D and"AutoUse enabled."or"AutoUse disabled.",2)local E=y()if E then pcall(function()if D then E:Activate()else E:Deactivate()end end)end end;if D then local E=y()if E then pcall(function()E:Activate()end)end end end))end;if l.Zoom.Enabled then local F={on=false,conn=nil,origFov=nil,strength=2}local function G()local H=d.camera or workspace.CurrentCamera;if not(H and F.origFov)then return end;H.FieldOfView=math.clamp(F.origFov/math.max(0.1,F.strength),10,120)end;local function I()F.on=false;if F.conn then pcall(function()F.conn:Disconnect()end)F.conn=nil end;local H=d.camera or workspace.CurrentCamera;if H and F.origFov then pcall(function()H.FieldOfView=F.origFov end)end end;local tg=p:AddToggle("ZOOM_Enable",{Text="Zoom",Default=false,Callback=function(D)local H=d.camera or workspace.CurrentCamera;if not H then e:Notify("Camera not ready.",3)if tg.SetValue then tg:SetValue(false)end;return end;if D then if not F.origFov then F.origFov=H.FieldOfView end;F.on=true;G()if not F.conn then F.conn=n(b.RunService.RenderStepped:Connect(function()if F.on then G()end end))end else I()end end}):AddKeyPicker("ZoomKey",{Default=nil,SyncToggleState=true,Mode="Toggle"})if l.Zoom.ZoomStrength.Enabled then p:AddSlider("ZOOM_Strength",{Text="Zoom Strength",Default=l.Zoom.ZoomStrength.Default or 2,Min=l.Zoom.ZoomStrength.Min or 1,Max=l.Zoom.ZoomStrength.Max or 10,Rounding=1,Callback=function(J)F.strength=J;if F.on then G()end end})else F.strength=2 end end;if l.PerformanceMode then p:AddToggle("PerformanceMode",{Text="Performance Mode",Default=false,Tooltip="Reduce visual effects locally for better FPS"})local K=nil;local function L()if K then return end;K={QualityLevel=settings().Rendering.QualityLevel,GlobalShadows=b.Lighting.GlobalShadows,Ambient=b.Lighting.Ambient,Brightness=b.Lighting.Brightness,FogEnd=b.Lighting.FogEnd,FogStart=b.Lighting.FogStart,Effects={},Terrain={}}for z,A in ipairs(b.Lighting:GetDescendants())do if A:IsA("BloomEffect")or A:IsA("ColorCorrectionEffect")or A:IsA("SunRaysEffect")or A:IsA("DepthOfFieldEffect")or A:IsA("BlurEffect")then K.Effects[A]=A.Enabled end end;local M=b.Workspace:FindFirstChildOfClass("Terrain")if M then K.Terrain.WaterWaveSize=M.WaterWaveSize;K.Terrain.WaterReflectance=M.WaterReflectance;K.Terrain.WaterTransparency=M.WaterTransparency;local w,N=pcall(function()return M.Decoration end)if w and type(N)=="boolean"then K.Terrain.Decoration=N end end end;local function O()L()settings().Rendering.QualityLevel=Enum.QualityLevel.Level01;b.Lighting.GlobalShadows=false;b.Lighting.Ambient=Color3.new(0.3,0.3,0.3)b.Lighting.Brightness=1;b.Lighting.FogEnd=1e10;b.Lighting.FogStart=1e10;for A in pairs(K.Effects)do if A and A.Parent then A.Enabled=false end end;local M=b.Workspace:FindFirstChildOfClass("Terrain")if M then M.WaterWaveSize=0;M.WaterReflectance=0;M.WaterTransparency=1;if K.Terrain.Decoration~=nil then pcall(function()M.Decoration=false end)end end;for z,P in ipairs(b.Workspace:GetDescendants())do if P:IsA("ParticleEmitter")or P:IsA("Trail")or P:IsA("Beam")or P:IsA("Smoke")or P:IsA("Fire")then if P.Enabled then P:SetAttribute("PerfWasEnabled",true)P.Enabled=false end end end end;local function Q()if not K then return end;settings().Rendering.QualityLevel=K.QualityLevel;b.Lighting.GlobalShadows=K.GlobalShadows;b.Lighting.Ambient=K.Ambient;b.Lighting.Brightness=K.Brightness;b.Lighting.FogEnd=K.FogEnd;b.Lighting.FogStart=K.FogStart;for A,R in pairs(K.Effects)do if A and A.Parent then A.Enabled=R end end;local M=b.Workspace:FindFirstChildOfClass("Terrain")if M then M.WaterWaveSize=K.Terrain.WaterWaveSize or M.WaterWaveSize;M.WaterReflectance=K.Terrain.WaterReflectance or M.WaterReflectance;M.WaterTransparency=K.Terrain.WaterTransparency or M.WaterTransparency;if K.Terrain.Decoration~=nil then pcall(function()M.Decoration=K.Terrain.Decoration end)end end;for z,P in ipairs(b.Workspace:GetDescendants())do if P:GetAttribute("PerfWasEnabled")then P:SetAttribute("PerfWasEnabled",nil)if P.Enabled~=nil then P.Enabled=true end end end;K=nil end;f.PerformanceMode:OnChanged(function()if f.PerformanceMode.Value then O()else Q()end end)end;if l.RemoveKillBricks then local S={}local function T(D)if not D then for U,V in pairs(S)do if U and U.Parent then U.CanTouch=V.touch;U.CanCollide=V.collide;U.Transparency=V.trans end end;table.clear(S)return end;for z,J in ipairs(b.Workspace:GetDescendants())do if J:IsA("BasePart")then local W=J.Name:lower()if W:find("kill")or W:find("lava")or W:find("damage")then S[J]={touch=J.CanTouch,collide=J.CanCollide,trans=J.Transparency}J.CanTouch=false;J.CanCollide=false;J.Transparency=0.5 end end end end;p:AddToggle("RemoveKillBricks",{Text="Remove KillBricks",Default=false,Tooltip="Disable bricks that cause death/damage",Callback=function(J)T(J)end})end;if l.ModSafety then local X={notify=false,leave=false}local function Y(Z)local w,_=pcall(function()return Z:GetAttribute("AdminLevel")end)if w and type(_)=="number"and _>0 then return true end;local a0=Z:GetAttribute("IsAdmin")or Z:GetAttribute("Moderator")or Z:GetAttribute("Staff")if a0==true then return true end;return false end;local function a1(Z)if not(X.notify or X.leave)then return end;if not Z or Z==d.player then return end;if not Y(Z)then return end;if X.notify then e:Notify("Moderator joined: "..Z.Name,6)end;if X.leave then task.defer(function()if d.player and d.player.Parent then b.TeleportService:Teleport(game.PlaceId,d.player)end end)end end;local a2=n(b.Players.PlayerAdded:Connect(a1))local function a3()if not(X.notify or X.leave)then return end;for z,Z in ipairs(b.Players:GetPlayers())do a1(Z)end end;p:AddToggle("ModNotifierToggle",{Text="Mod Notifier",Default=false,Tooltip="Notify when a moderator/staff joins",Callback=function(J)X.notify=J;if J then a3()end end})p:AddToggle("LeaveOnModToggle",{Text="Leave If Mod Joins",Default=false,Tooltip="Auto-leave the server if a moderator/staff joins",Callback=function(J)X.leave=J;if J then a3()end end})end;if l.AntiAFK then p:AddToggle("AntiAFK_Toggle",{Text="Anti-AFK",Default=false,Callback=function(a4)if a4 then if not getgenv()._AntiAFK_Conn then getgenv()._AntiAFK_Conn=n(game:GetService("Players").LocalPlayer.Idled:Connect(function()game:GetService("VirtualUser"):CaptureController()game:GetService("VirtualUser"):ClickButton2(Vector2.new())end))end else if getgenv()._AntiAFK_Conn then getgenv()._AntiAFK_Conn:Disconnect()getgenv()._AntiAFK_Conn=nil end end end})end;if l.FPSCap then p:AddInput("UTILS_FPSCap",{Text="FPS Cap",Placeholder="Enter target FPS",Default="60",Numeric=true,Finished=true,Tooltip="Set a custom FPS limit",Callback=function(a5)local a6=tonumber(a5)if a6 and a6>0 then if setfpscap then setfpscap(a6)e:Notify(("FPS cap set to %d"):format(a6),3)else e:Notify("FPS unlocker not supported in this executor.",3)end else e:Notify("Please enter a positive number for FPS.",3)end end})end;if l.QuickReset then p:AddButton({Text="Quick Reset",Func=function()i()end})end;if h then h:Register(function()for a7=#m,1,-1 do local a8=m[a7]m[a7]=nil;pcall(function()if a8 and a8.Disconnect then a8:Disconnect()end end)end end)end;return{}end
