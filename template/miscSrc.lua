return function(a)local b=a.Services;local c=a.Tabs;local d=a.References;local e=a.Library;local f=a.Options;local g=a.Toggles;local h=a.Unloader;local i=a.MiscConfig;if i.Enabled~=true then return end;local j={}local k=nil;local l=nil;local m=nil;local function n(o)if o then j[#j+1]=o end end;if i.ServerPanel then local function p(q,r,s,t,u)local request=syn and syn.request or http_request or request or fluxus and fluxus.request or krnl and krnl.request;if not request then return false,"No HTTP request function available"end;t=tonumber(t)or game.PlaceId;u=u or 2;local v=game.JobId;local function w(x)local y=("https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Asc&limit=100"):format(t)if x and x~=""then y=y.."&cursor="..b.HttpService:UrlEncode(x)end;local z=request({Url=y,Method="GET",Headers={["Content-Type"]="application/json"}})if not z or not z.Success then return false,z and z.StatusMessage or"HTTP error"end;local A,B=pcall(b.HttpService.JSONDecode,b.HttpService,z.Body)if not A then return false,"JSON decode failed"end;return true,B end;local C={}local x=nil;local D=0;while D<u do local A,E=w(x)if not A then return false,E end;local F=E;if type(F.data)~="table"then break end;for G,H in ipairs(F.data)do local I=H.id;local J=H.playing or 0;local K=H.maxPlayers or 0;local L=H.ping or H.playerPing;if I~=v then local M=J<K;local N=true;if r then N=J<=r end;local O=true;if s then if L==nil then O=false else O=L<=s end end;if M and N and O then table.insert(C,{jobId=I,players=J,maxPlayers=K,ping=L or math.huge,raw=H})end end end;x=F.nextPageCursor;D=D+1;if not x or x==""then break end end;if#C==0 then return false,"No suitable servers found"end;if q=="lowest_player"then table.sort(C,function(P,Q)if P.players==Q.players then return P.ping<Q.ping end;return P.players<Q.players end)elseif q=="lowest_ping"then table.sort(C,function(P,Q)if P.ping==Q.ping then return P.players<Q.players end;return P.ping<Q.ping end)elseif q=="random"then math.randomseed(os.time()+#C)local R=math.random(1,#C)local S=C[R]local A,T=pcall(function()b.TeleportService:TeleportToPlaceInstance(t,S.jobId,d.player)end)if not A then return false,"Teleport failed: "..tostring(T)end;return true,"Teleporting to random server"else table.sort(C,function(P,Q)if P.ping==Q.ping then return P.players<Q.players end;return P.ping<Q.ping end)end;local S=C[1]local A,T=pcall(function()b.TeleportService:TeleportToPlaceInstance(t,S.jobId,d.player)end)if not A then return false,"Teleport failed: "..tostring(T)end;return true,"Teleporting to server "..tostring(S.jobId)end;local U=c.Misc:AddLeftGroupbox("Server Panel","server")if i.MaxPlayer.Enabled then U:AddSlider("SERVER_MaxPlayers",{Text="Max Player Count",Min=i.MaxPlayer.Min or 1,Max=i.MaxPlayer.Max or 50,Default=i.MaxPlayer.Default or 20,Rounding=0})else f.SERVER_MaxPlayers.Value=20 end;if i.MaxPing.Enabled then U:AddSlider("SERVER_MaxPing",{Text="Max Ping (ms)",Min=i.MaxPing.Min or 1,Max=i.MaxPing.Max or 1000,Default=i.MaxPing.Default or 200,Rounding=0})else f.SERVER_MaxPing.Value=200 end;local V={"Lowest Players","Lowest Ping","Random"}U:AddDropdown("SERVER_Filter",{Text="Filter",Values=V,Default="Lowest Ping",Multi=false})local function W()local X=f.SERVER_Filter and f.SERVER_Filter.Value or"Lowest Ping"if X=="Lowest Players"then return"lowest_player"elseif X=="Random"then return"random"else return"lowest_ping"end end;local function Y()local K=tonumber(f.SERVER_MaxPlayers and f.SERVER_MaxPlayers.Value)or nil;local Z=tonumber(f.SERVER_MaxPing and f.SERVER_MaxPing.Value)or nil;local _=W()local A,a0=p(_,K,Z)if not A then e:Notify("[Server Hop] Failed: "..tostring(a0),4)else e:Notify("[Server Hop] "..tostring(a0),4)end end;U:AddButton({Text="Server Hop Once",Func=function()Y()end})if i.AutoHopInterval.Enabled then U:AddSlider("SERVER_AutoHopInterval",{Text="Auto Hop Interval (s)",Min=i.AutoHopInterval.Min or 1,Max=i.AutoHopInterval.Max or 600,Default=i.AutoHopInterval.Default or 60,Rounding=0,Suffix="s"})else f.SERVER_AutoHopInterval.Value=60 end;local a1=false;local function a2()a1=false end;local function a3()if a1 then return end;a1=true;task.spawn(function()while a1 and g.SERVER_AutoHop and g.SERVER_AutoHop.Value do local K=tonumber(f.SERVER_MaxPlayers and f.SERVER_MaxPlayers.Value)or nil;local Z=tonumber(f.SERVER_MaxPing and f.SERVER_MaxPing.Value)or nil;local _=W()local A,a0=p(_,K,Z)if not A then e:Notify("[Auto Hop] Failed: "..tostring(a0),4)else e:Notify("[Auto Hop] "..tostring(a0),4)end;local a4=tonumber(f.SERVER_AutoHopInterval and f.SERVER_AutoHopInterval.Value)or 60;a4=math.clamp(a4,1,600)local a5=0;while a5<a4 do if not a1 or not(g.SERVER_AutoHop and g.SERVER_AutoHop.Value)then break end;task.wait(0.5)a5=a5+0.5 end end end)end;if i.AutoHop then U:AddToggle("SERVER_AutoHop",{Text="Enable Auto Hop",Default=false,Tooltip="Automatically hops to a new server every interval using the selected filter."}):OnChanged(function(a6)if a6 then a3()else a2()end end)end;U:AddButton({Text="Rejoin Server",Func=function()e:Notify("Attempting to rejoin current server...",3)local A,T=pcall(function()b.TeleportService:TeleportToPlaceInstance(game.PlaceId,game.JobId,d.player)end)if not A then e:Notify("[Rejoin] Failed: "..tostring(T),4)end end})U:AddButton({Text="Copy Join Script",Func=function()setclipboard(([[game:GetService("TeleportService"):TeleportToPlaceInstance(%d, "%s", game:GetService("Players").LocalPlayer)]]):format(game.PlaceId,game.JobId))e:Notify("Join script copied!",3)end})end;if i.Console then local a7=c.Misc:AddRightGroupbox("Console","code")a7:AddButton({Text="Console",Func=function()e:Notify("Launched console.",3)loadstring(game:HttpGet("https://raw.githubusercontent.com/whodunitwww/noxhelpers/refs/heads/main/console.lua"))()end})end;if i.PerformanceHUD.Enabled then local a8=c.Misc:AddRightGroupbox("Performance HUD","gauge")local a9={gui=nil,conn=nil,fpsSmooth=60,scale=1}local aa={gui=nil,conn=nil,fpsSmooth=60,frameMs=0,accum=0,updateInterval=0.25,values={},lastCostMs=0,nextStatRefresh=0}local function ab()local A,ac=pcall(function()return rawget(getfenv(),"gethui")and gethui()or b.CoreGui or game:GetService("CoreGui")end)return A and ac or b.Players.LocalPlayer:WaitForChild("PlayerGui")end;local function ad()if a9.conn then a9.conn:Disconnect()a9.conn=nil end;if a9.gui then a9.gui:Destroy()a9.gui=nil end end;k=ad;local function ae()ad()local af=ab()local ag=Instance.new("ScreenGui")ag.Name="CerberusHUD"ag.ResetOnSpawn=false;ag.IgnoreGuiInset=true;ag.ZIndexBehavior=Enum.ZIndexBehavior.Sibling;ag.Parent=af;a9.gui=ag;local ah=Instance.new("Frame")ah.Name="Holder"ah.AnchorPoint=Vector2.new(1,0)ah.Position=UDim2.new(1,-20,0,20)ah.Size=UDim2.fromOffset(320,100)ah.BackgroundColor3=Color3.fromRGB(29,30,36)ah.BackgroundTransparency=0.05;ah.Active=true;ah.Parent=ag;local ai=Instance.new("UICorner",ah)ai.CornerRadius=UDim.new(0,18)local aj=Instance.new("UIStroke",ah)aj.Thickness=2;aj.Transparency=0.3;aj.Color=Color3.fromRGB(92,94,104)local ak=Instance.new("ImageLabel")ak.Name="Shadow"ak.BackgroundTransparency=1;ak.Image="rbxassetid://5028857084"ak.ImageTransparency=0.6;ak.ScaleType=Enum.ScaleType.Slice;ak.SliceCenter=Rect.new(24,24,276,276)ak.Size=UDim2.new(1,24,1,24)ak.Position=UDim2.new(0,-12,0,-12)ak.ZIndex=0;ak.Parent=ah;local al=Instance.new("Frame")al.Name="Left"al.BackgroundTransparency=1;al.Size=UDim2.new(0.65,0,1,-20)al.Position=UDim2.new(0,20,0,10)al.Parent=ah;local am=Instance.new("UIListLayout",al)am.FillDirection=Enum.FillDirection.Vertical;am.VerticalAlignment=Enum.VerticalAlignment.Center;am.Padding=UDim.new(0,12)local function an(ao)local ap=Instance.new("Frame")ap.BackgroundTransparency=1;ap.Size=UDim2.new(1,0,0,34)local aq=Instance.new("TextLabel")aq.Name="Title"aq.BackgroundTransparency=1;aq.Font=Enum.Font.Gotham;aq.Text=ao;aq.TextColor3=Color3.fromRGB(172,175,185)aq.TextSize=16;aq.TextXAlignment=Enum.TextXAlignment.Left;aq.Size=UDim2.new(0.5,0,1,0)aq.Parent=ap;local X=Instance.new("TextLabel")X.Name="Value"X.BackgroundTransparency=1;X.Font=Enum.Font.GothamSemibold;X.Text="--"X.TextColor3=Color3.fromRGB(238,239,244)X.TextSize=28;X.TextXAlignment=Enum.TextXAlignment.Left;X.Position=UDim2.new(0.5,0,0,0)X.Size=UDim2.new(0.5,0,1,0)X.Parent=ap;return ap,X end;local ar,as=an("FPS")ar.Parent=al;local at,au=an("Ping")at.Parent=al;local av=Instance.new("ImageLabel")av.Name="Icon"av.BackgroundTransparency=1;av.AnchorPoint=Vector2.new(1,0.5)av.Position=UDim2.new(1,-24,0.5,0)av.Size=UDim2.fromOffset(56,56)av.Image="rbxassetid://136497541793809"av.ImageColor3=Color3.fromRGB(55,235,120)av.Parent=ah;local aw,ax,ay;n(ah.InputBegan:Connect(function(az)if az.UserInputType==Enum.UserInputType.MouseButton1 or az.UserInputType==Enum.UserInputType.Touch then aw,ax,ay=true,az.Position,ah.Position;az.Changed:Connect(function()if az.UserInputState==Enum.UserInputState.End then aw=false end end)end end))n(ah.InputChanged:Connect(function(az)if aw and(az.UserInputType==Enum.UserInputType.MouseMovement or az.UserInputType==Enum.UserInputType.Touch)then local aA=az.Position-ax;ah.Position=UDim2.new(ay.X.Scale,ay.X.Offset+aA.X,ay.Y.Scale,ay.Y.Offset+aA.Y)end end))local aB=game:GetService("Stats")local aC=aB and aB.Network and aB.Network.ServerStatsItem and aB.Network.ServerStatsItem["Data Ping"]a9.conn=n(b.RunService.RenderStepped:Connect(function(aD)local aE=aD>0 and 1/aD or 60;a9.fpsSmooth=a9.fpsSmooth+(aE-a9.fpsSmooth)*0.2;as.Text=string.format("%d",math.clamp(math.floor(a9.fpsSmooth+0.5),1,1000))local aF;if aC and aC.GetValue then local A,X=pcall(function()return aC:GetValue()end)if A and type(X)=="number"then aF=math.floor(X+0.5)end end;if not aF and aC and aC.GetValueString then local A,aG=pcall(function()return aC:GetValueString()end)if A and type(aG)=="string"then aF=tonumber(aG:match("(%d+)"))end end;au.Text=aF and aF.." ms"or"--"end))end;local function aH()if aa.conn then aa.conn:Disconnect()aa.conn=nil end;if aa.gui then aa.gui:Destroy()aa.gui=nil end;aa.values={}aa.accum=0 end;l=aH;local function aI()aH()local af=ab()local ag=Instance.new("ScreenGui")ag.Name="CerberusDiagnostics"ag.ResetOnSpawn=false;ag.IgnoreGuiInset=true;ag.ZIndexBehavior=Enum.ZIndexBehavior.Sibling;ag.DisplayOrder=10000;ag.Parent=af;aa.gui=ag;local aJ=Instance.new("Frame")aJ.Name="Panel"aJ.AnchorPoint=Vector2.new(1,0)aJ.Position=UDim2.new(1,-20,0,140)aJ.Size=UDim2.fromOffset(520,420)aJ.BackgroundColor3=Color3.fromRGB(24,25,30)aJ.BackgroundTransparency=0.03;aJ.Active=true;aJ.Parent=ag;local ai=Instance.new("UICorner",aJ)ai.CornerRadius=UDim.new(0,16)local aj=Instance.new("UIStroke",aJ)aj.Thickness=2;aj.Transparency=0.35;aj.Color=Color3.fromRGB(92,94,104)local aK=Instance.new("Frame")aK.Name="TitleBar"aK.BackgroundTransparency=1;aK.Size=UDim2.new(1,-24,0,36)aK.Position=UDim2.new(0,12,0,10)aK.Parent=aJ;local aL=Instance.new("TextLabel")aL.BackgroundTransparency=1;aL.Font=Enum.Font.GothamSemibold;aL.Text="Cerberus Diagnostics"aL.TextColor3=Color3.fromRGB(235,236,241)aL.TextSize=18;aL.TextXAlignment=Enum.TextXAlignment.Left;aL.Size=UDim2.new(1,-40,1,0)aL.Parent=aK;local aM=Instance.new("TextButton")aM.Name="Close"aM.BackgroundTransparency=1;aM.Font=Enum.Font.GothamSemibold;aM.Text="X"aM.TextColor3=Color3.fromRGB(170,170,180)aM.TextSize=18;aM.Size=UDim2.new(0,28,1,0)aM.AnchorPoint=Vector2.new(1,0)aM.Position=UDim2.new(1,0,0,0)aM.Parent=aK;local aN=Instance.new("ScrollingFrame")aN.Name="List"aN.BackgroundTransparency=1;aN.BorderSizePixel=0;aN.Position=UDim2.new(0,12,0,52)aN.Size=UDim2.new(1,-24,1,-72)aN.CanvasSize=UDim2.new(0,0,0,0)aN.AutomaticCanvasSize=Enum.AutomaticSize.Y;aN.ScrollBarThickness=6;aN.Parent=aJ;local aO=Instance.new("UIListLayout",aN)aO.Padding=UDim.new(0,8)aO.SortOrder=Enum.SortOrder.LayoutOrder;local aP=Instance.new("UIPadding",aN)aP.PaddingRight=UDim.new(0,10)local function aQ(aR)local ao=Instance.new("TextLabel")ao.BackgroundTransparency=1;ao.Font=Enum.Font.GothamBold;ao.Text=aR;ao.TextColor3=Color3.fromRGB(120,255,170)ao.TextSize=14;ao.TextXAlignment=Enum.TextXAlignment.Left;ao.Size=UDim2.new(1,0,0,18)ao.Parent=aN end;local function aS(aT,aU)local aV=Instance.new("Frame")aV.BackgroundTransparency=1;aV.Size=UDim2.new(1,0,0,22)aV.Parent=aN;local ao=Instance.new("TextLabel")ao.BackgroundTransparency=1;ao.Font=Enum.Font.Gotham;ao.Text=aU;ao.TextColor3=Color3.fromRGB(170,173,184)ao.TextSize=14;ao.TextXAlignment=Enum.TextXAlignment.Left;ao.Size=UDim2.new(0.55,0,1,0)ao.Parent=aV;local aW=Instance.new("TextLabel")aW.BackgroundTransparency=1;aW.Font=Enum.Font.GothamSemibold;aW.Text="--"aW.TextColor3=Color3.fromRGB(236,238,244)aW.TextSize=14;aW.TextXAlignment=Enum.TextXAlignment.Right;aW.Size=UDim2.new(0.45,0,1,0)aW.Position=UDim2.new(0.55,0,0,0)aW.Parent=aV;aa.values[aT]=aW end;aQ("Performance")aS("fps","FPS")aS("framems","Frame Time")aS("ping","Ping")aS("luamem","Lua Memory")aS("totalmem","Total Memory")aS("cerbcost","Cerberus Cost (est.)")aQ("Network")aS("netin","Data Receive")aS("netout","Data Send")aQ("Player")aS("health","Health")aS("walkspeed","WalkSpeed")aS("jumppower","JumpPower")aS("velocity","Velocity")aS("position","Position")aQ("Camera + World")aS("fov","Camera FOV")aS("gravity","Gravity")aS("place","PlaceId")aS("job","JobId")aS("players","Players")aQ("Cerberus")aS("toggles","Toggles Enabled")aS("uptime","Uptime")aM.MouseButton1Click:Connect(function()if g and g.HUD_Diagnostics then g.HUD_Diagnostics:SetValue(false)else aH()end end)local aw,ax,ay;n(aJ.InputBegan:Connect(function(az)if az.UserInputType==Enum.UserInputType.MouseButton1 or az.UserInputType==Enum.UserInputType.Touch then aw,ax,ay=true,az.Position,aJ.Position;az.Changed:Connect(function()if az.UserInputState==Enum.UserInputState.End then aw=false end end)end end))n(aJ.InputChanged:Connect(function(az)if aw and(az.UserInputType==Enum.UserInputType.MouseMovement or az.UserInputType==Enum.UserInputType.Touch)then local aA=az.Position-ax;aJ.Position=UDim2.new(ay.X.Scale,ay.X.Offset+aA.X,ay.Y.Scale,ay.Y.Offset+aA.Y)end end))local aB=game:GetService("Stats")local function aX(aY)return typeof(aY)=="Instance"and(aY.GetValue~=nil or aY.GetValueString~=nil)end;local function aZ(af,a_,b0)if not af then return nil end;for G,b1 in ipairs(a_)do local aY=af:FindFirstChild(b1)if aY then return aY end end;if b0 then for G,aY in ipairs(af:GetDescendants())do if aX(aY)then local b2=tostring(aY.Name):lower()local A=true;for G,b3 in ipairs(b0)do if not b2:find(b3,1,true)then A=false;break end end;if A then return aY end end end end;return nil end;local function b4(af,b0)local b5={}if not af then return b5 end;for G,aY in ipairs(af:GetDescendants())do if aX(aY)then local b2=tostring(aY.Name):lower()local A=true;for G,b3 in ipairs(b0)do if not b2:find(b3,1,true)then A=false;break end end;if A then b5[#b5+1]=aY end end end;return b5 end;local b6=aB and aB.Network and(aB.Network.ServerStatsItem or aB.Network)or nil;local aC=aZ(b6,{"Data Ping","Ping"},{"ping"})local b7=aZ(b6,{"Data Receive Kbps","Data Receive (Kbps)","Data Receive"},{"receive"})local b8=aZ(b6,{"Data Send Kbps","Data Send (Kbps)","Data Send"},{"send"})local function b9()if not b6 then b6=aB and aB.Network and(aB.Network.ServerStatsItem or aB.Network)or nil end;if b6 then aC=aC or aZ(b6,{"Data Ping","Ping"},{"ping"})if not b7 then b7=aZ(b6,{"Data Receive Kbps","Data Receive (Kbps)","Data Receive"},{"receive"})end;if not b7 then b7=aZ(b6,{},{"incoming"})end;if not b7 then b7=aZ(b6,{},{"recv"})end;if not b8 then b8=aZ(b6,{"Data Send Kbps","Data Send (Kbps)","Data Send"},{"send"})end;if not b8 then b8=aZ(b6,{},{"outgoing"})end;if not b8 then b8=aZ(b6,{},{"sent"})end;aa.recvCandidates=b4(b6,{"receive"})aa.sendCandidates=b4(b6,{"send"})if#aa.recvCandidates==0 then aa.recvCandidates=b4(b6,{"incoming"})end;if#aa.sendCandidates==0 then aa.sendCandidates=b4(b6,{"outgoing"})end end end;b9()local function ba(aY)if not aY then return nil end;local aW=nil;if aY.GetValue then local A,X=pcall(function()return aY:GetValue()end)if A and type(X)=="number"then aW=X end end;if aY.GetValueString then local A,aG=pcall(function()return aY:GetValueString()end)if A and type(aG)=="string"then local bb=tonumber(aG:match("([%d%.]+)"))if bb and(aW==nil or aW<=0)then aW=bb end end end;return aW end;local function bc(aT,aR)local ao=aa.values[aT]if ao then ao.Text=aR end end;local function bd(be)if not be then return"--"end;return string.format("%.1f, %.1f, %.1f",be.X,be.Y,be.Z)end;local function bf()local bg=0;for G,aq in pairs(g)do if type(aq)=="table"and aq.Value==true then bg=bg+1 end end;return bg end;local bh=os.clock()local bi=Vector2.new(0,0)local function bj()local bk=d.camera or workspace.CurrentCamera;if not bk then return end;local bl=bk.ViewportSize;if bl.X<=0 or bl.Y<=0 then return end;if bl==bi then return end;bi=bl;local bm=math.max(300,bl.X-40)local bn=math.max(240,bl.Y-80)local bo=math.min(520,bm)local bp=math.min(420,bn)aJ.Size=UDim2.fromOffset(bo,bp)end;aa.conn=n(b.RunService.RenderStepped:Connect(function(aD)if not aa.gui then return end;bj()local aE=aD>0 and 1/aD or 60;aa.fpsSmooth=aa.fpsSmooth+(aE-aa.fpsSmooth)*0.2;aa.frameMs=aD*1000;aa.accum=aa.accum+aD;if aa.accum<aa.updateInterval then return end;aa.accum=0;local bq=os.clock()if os.clock()>=aa.nextStatRefresh then b9()aa.nextStatRefresh=os.clock()+2 end;local L=ba(aC)if not L and d.player and d.player.GetNetworkPing then local A,br=pcall(function()return d.player:GetNetworkPing()end)if A and type(br)=="number"then L=br*1000 end end;local bs=ba(b7)if(not bs or bs<=0)and aa.recvCandidates and#aa.recvCandidates>0 then for G,aY in ipairs(aa.recvCandidates)do local X=ba(aY)if X and X>0 then bs=X;break end end end;local bt=ba(b8)if(not bt or bt<=0)and aa.sendCandidates and#aa.sendCandidates>0 then for G,aY in ipairs(aa.sendCandidates)do local X=ba(aY)if X and X>0 then bt=X;break end end end;local bu=collectgarbage and collectgarbage("count")or nil;local bv;if aB and aB.GetTotalMemoryUsageMb then local A,bw=pcall(aB.GetTotalMemoryUsageMb,aB)if A then bv=bw end end;local bx=d.humanoid;local by=d.humanoidRootPart;local bz="--"if bx then bz=string.format("%d / %d",math.floor(bx.Health+0.5),math.floor(bx.MaxHealth+0.5))end;bc("fps",string.format("%d",math.floor(aa.fpsSmooth+0.5)))bc("framems",string.format("%.1f ms",aa.frameMs))bc("ping",L and math.floor(L+0.5).." ms"or"--")bc("luamem",bu and string.format("%.1f MB",bu/1024)or"--")bc("totalmem",bv and string.format("%.1f MB",bv)or"--")bc("netin",bs and string.format("%.1f kbps",bs)or"n/a")bc("netout",bt and string.format("%.1f kbps",bt)or"n/a")bc("health",bz)bc("walkspeed",bx and string.format("%.1f",bx.WalkSpeed)or"--")bc("jumppower",bx and string.format("%.1f",bx.JumpPower)or"--")bc("velocity",by and string.format("%.1f",by.AssemblyLinearVelocity.Magnitude)or"--")bc("position",by and bd(by.Position)or"--")bc("fov",d.camera and string.format("%.1f",d.camera.FieldOfView)or"--")bc("gravity",tostring(b.Workspace.Gravity))bc("place",tostring(game.PlaceId))bc("job",tostring(game.JobId or"--"))bc("players",tostring(#b.Players:GetPlayers()))bc("toggles",tostring(bf()))bc("uptime",string.format("%.0f s",os.clock()-bh))aa.lastCostMs=(os.clock()-bq)*1000;bc("cerbcost",string.format("%.2f ms",aa.lastCostMs))end))end;a8:AddToggle("HUD_Enable",{Text="Show FPS + Ping",Tooltip="Can only show up to 60 fps",Default=false,Callback=function(a6)if a6 then ae()else ad()end end})local bA=i.PerformanceHUD.DiagnosticsEnabled==true;local bB=a8:AddToggle("HUD_Diagnostics",{Text="Diagnostics Panel",Tooltip="Pop-out diagnostics with system and Cerberus stats",Default=bA,Callback=function(a6)if a6 then aI()else aH()end end})if bA and not aa.gui then aI()end;if i.PerformanceHUD.Scale.Enabled then a8:AddSlider("HUD_Scale",{Text="HUD Scale",Default=i.PerformanceHUD.Scale.Default or 90,Min=i.PerformanceHUD.Scale.Min or 70,Max=i.PerformanceHUD.Scale.Max or 150,Rounding=0,Suffix="%",Callback=function(X)a9.scale=X/100;if a9.gui and a9.gui:FindFirstChild("Holder")then local ah=a9.gui.Holder;ah.Size=UDim2.fromOffset(320*a9.scale,100*a9.scale)for G,aJ in ipairs(ah:GetDescendants())do if aJ:IsA("TextLabel")then if aJ.Name=="Title"then aJ.TextSize=16*a9.scale elseif aJ.Name=="Value"then aJ.TextSize=28*a9.scale end end end end end})end end;if i.Environment.Enabled then local bC=c.Misc:AddRightGroupbox("Environment","trees")local bD,bE=false,Color3.fromRGB(128,128,128)local bF=b.Lighting and b.Lighting.Ambient or Color3.new()local bG,bH,bI=false,b.Lighting and b.Lighting.ClockTime or 12,nil;local function bJ()if b.Lighting then b.Lighting.Ambient=bD and bE or bF end end;if i.Environment.CustomAmbient then bC:AddToggle("ENV_Ambient",{Text="Custom Ambient",Default=false,Tooltip="Choose your own custom ambient color.",Callback=function(X)bD=X;bJ()end})bC:AddLabel("Ambient Color"):AddColorPicker("ENV_AmbientColor",{Default=bE,Title="Ambient Color",Callback=function(bK)bE=bK;if bD then bJ()end end})end;if i.Environment.CustomTime then bC:AddToggle("ENV_TimeLock",{Text="Custom Time of Day",Default=false,Callback=function(a6)bG=a6;if a6 then if b.Lighting then b.Lighting.ClockTime=bH end;if not bI then bI=n(b.RunService.RenderStepped:Connect(function()if b.Lighting then b.Lighting.ClockTime=bH end end))end;e:Notify("Time of Day locked.",3)else if bI then bI:Disconnect()bI=nil end;e:Notify("Time of Day unlocked.",3)end end})bC:AddSlider("ENV_Time",{Text="Time of Day",Default=bH,Min=0,Max=24,Rounding=2,Suffix="h",Callback=function(X)bH=X;if bG and b.Lighting then b.Lighting.ClockTime=X end end})end end;if i.AutoChat then local bL=c.Misc:AddRightGroupbox("Auto Chat","message-circle")local bM;local bN=false;bL:AddToggle("autoChatEnabled",{Text="Auto Chat",Default=false,Callback=function(bO)bN=bO;if bO then task.spawn(function()while bN do local a0=f.autoChatMessage.Value;local a4=tonumber(f.autoChatInterval.Value)or 5;if a0 and a0:match("%S")then local bP=game:GetService("TextChatService").TextChannels:FindFirstChild("RBXGeneral")if bP then pcall(function()bP:SendAsync(a0)end)end else e:Notify("Your message can't be empty.",3)bN=false;g.autoChatEnabled:SetValue(false)break end;task.wait(a4)end end)else end end})bL:AddInput("autoChatMessage",{Default="Hello Everyone!",Numeric=false,Finished=false,ClearTextOnFocus=true,Text="Message",Callback=function(bQ)end})bL:AddSlider("autoChatInterval",{Text="Chat Interval (s)",Default=10,Min=1,Max=120,Rounding=1,Suffix="s",Callback=function(bQ)end})end;if i.StreamerMode then local bR=b.TextChatService;local bS=b.CoreGui;local bT=b.Players.LocalPlayer;local bU={enabled=false,selected={["Hide Own Name"]=false,["Hide Others Names"]=false,["Hide Own Skin"]=false,["Hide Others Skins"]=false},_cons={},_chatConn=nil,_legacyChatConns={},_uiLoop=nil,_uiScrub=nil,_nameDDT={},_skin={},_nameCache={},_descAddedConn=nil}local function bV(bW)return typeof(bW)=="Instance"and bW.Parent~=nil end;local function bX(bY)local bK=bY and bY.Character;if bV(bK)then return bK end;return nil end;local function bZ(af,b_)if not bV(af)then return nil end;local A,z=pcall(function()return af:FindFirstChildOfClass(b_)end)if A and bV(z)then return z end;return nil end;local function c0(af,b1)if not bV(af)then return nil end;local A,z=pcall(function()return af:FindFirstChild(b1)end)if A and bV(z)then return z end;return nil end;local function c1(c2)local c3=bZ(c2,"Humanoid")if c3 and c3.Health>0 then return c3 end;return nil end;local function c4(aG)return aG:gsub("([^%w])","%%%1")end;local function c5(bY,c6)local c2=bX(bY)local bx=c1(c2)if not bx then return end;local c7=bY.UserId;if c6 then if bU._nameDDT[c7]==nil then bU._nameDDT[c7]=bx.DisplayDistanceType end;bx.DisplayDistanceType=Enum.HumanoidDisplayDistanceType.None else bx.DisplayDistanceType=bU._nameDDT[c7]or Enum.HumanoidDisplayDistanceType.Viewer end end;local function c8(bY)if not bY then return end;local c7=bY.UserId;if not bU._nameCache[c7]then bU._nameCache[c7]={Name=bY.Name,Display=bY.DisplayName}end end;local function c9(bY)if not bY then return end;c8(bY)pcall(function()bY.Name="???"end)pcall(function()bY.DisplayName="???"end)end;local function ca(bY)if not bY then return end;local c7=bY.UserId;local cb=bU._nameCache[c7]if not cb then return end;pcall(function()bY.Name=cb.Name end)pcall(function()bY.DisplayName=cb.Display end)end;local function cc()local cd={}local ce=bU.selected["Hide Own Name"]local cf=bU.selected["Hide Others Names"]if not(ce or cf)then return cd end;local function cg(ch)if ch and ch~=""then cd[ch]="???"end end;for G,ci in ipairs(b.Players:GetPlayers())do local cj=ci==bT;if cj and ce or not cj and cf then local c7=ci.UserId;local ck=bU._nameCache[c7]if ck then cg(ck.Name)cg(ck.Display)cg("@"..ck.Name)cg("@"..ck.Display)else cg(ci.Name)cg(ci.DisplayName)cg("@"..ci.Name)cg("@"..ci.DisplayName)end end end;return cd end;local function cl(aR,cd)if not aR or aR==""then return aR end;local b5=aR;for cm,cn in pairs(cd)do b5=b5:gsub(c4(cm),cn)end;return b5 end;local function co(cp,cd)if cp:IsA("TextLabel")or cp:IsA("TextButton")or cp:IsA("TextBox")then if cp.Text and#cp.Text>0 then local cq=cl(cp.Text,cd)if cq~=cp.Text then cp.Text=cq end end end end;local function cr()if bU._uiScrub then bU._uiScrub:Disconnect()end;local aq=0;bU._uiScrub=n(b.RunService.RenderStepped:Connect(function(aD)if not bU.enabled then return end;aq=aq+aD;if aq<0.25 then return end;aq=0;local cd=cc()if next(cd)==nil then return end;local function cs(by)if not bV(by)then return end;for G,ct in ipairs(by:GetDescendants())do if ct:IsA("TextLabel")or ct:IsA("TextButton")or ct:IsA("TextBox")then co(ct,cd)elseif ct:IsA("BillboardGui")then for G,cu in ipairs(ct:GetDescendants())do if cu:IsA("TextLabel")then co(cu,cd)end end end end end;cs(bS)if bT and bV(bT)then local cv=c0(bT,"PlayerGui")if cv then cs(cv)end end end))if bU._descAddedConn then bU._descAddedConn:Disconnect()end;bU._descAddedConn=n(game.DescendantAdded:Connect(function(cw)if not bU.enabled then return end;local cd=cc()if next(cd)==nil then return end;pcall(function()if cw:IsA("TextLabel")or cw:IsA("TextButton")or cw:IsA("TextBox")then co(cw,cd)elseif cw:IsA("BillboardGui")then for G,cu in ipairs(cw:GetDescendants())do if cu:IsA("TextLabel")then co(cu,cd)end end end end)end))end;local function cx()if bU._uiScrub then bU._uiScrub:Disconnect()end;bU._uiScrub=nil;if bU._descAddedConn then bU._descAddedConn:Disconnect()end;bU._descAddedConn=nil end;local function cy(bY)if not bY then return end;bU._skin[bY.UserId]=nil end;local function cz(bY,c2)if not(bY and bV(c2))then return end;local c7=bY.UserId;if bU._skin[c7]then return end;local cA={acc={},shirt=nil,pants=nil,tshirt=nil,colors=nil}for G,bW in ipairs(c2:GetChildren())do if bW:IsA("Accessory")then table.insert(cA.acc,bW)end end;cA.shirt=bZ(c2,"Shirt")cA.pants=bZ(c2,"Pants")cA.tshirt=bZ(c2,"ShirtGraphic")local cB=bZ(c2,"BodyColors")if cB then cA.colors={Head=cB.HeadColor3,LA=cB.LeftArmColor3,RA=cB.RightArmColor3,LL=cB.LeftLegColor3,RL=cB.RightLegColor3,Torso=cB.TorsoColor3}end;bU._skin[c7]=cA end;local function cC(bY)local c2=bX(bY)if not c2 then return end;cz(bY,c2)for G,bW in ipairs(c2:GetChildren())do if bW:IsA("Accessory")and bV(bW)then bW.Parent=nil end end;local aG=bZ(c2,"Shirt")local ci=bZ(c2,"Pants")local aq=bZ(c2,"ShirtGraphic")if aG then aG.Parent=nil end;if ci then ci.Parent=nil end;if aq then aq.Parent=nil end;local cB=bZ(c2,"BodyColors")if cB then local cD=Color3.fromRGB(130,130,130)pcall(function()cB.HeadColor3=cD;cB.LeftArmColor3=cD;cB.RightArmColor3=cD;cB.LeftLegColor3=cD;cB.RightLegColor3=cD;cB.TorsoColor3=cD end)end end;local function cE(bY)local c2=bX(bY)if not c2 then return end;local cA=bU._skin[bY.UserId]if not cA then return end;if cA.shirt and cA.shirt.Parent==nil then cA.shirt.Parent=c2 end;if cA.pants and cA.pants.Parent==nil then cA.pants.Parent=c2 end;if cA.tshirt and cA.tshirt.Parent==nil then cA.tshirt.Parent=c2 end;for G,cF in ipairs(cA.acc)do if bV(cF)and cF.Parent==nil then cF.Parent=c2 end end;local cB=bZ(c2,"BodyColors")if cB and cA.colors then pcall(function()cB.HeadColor3=cA.colors.Head;cB.LeftArmColor3=cA.colors.LA;cB.RightArmColor3=cA.colors.RA;cB.LeftLegColor3=cA.colors.LL;cB.RightLegColor3=cA.colors.RL;cB.TorsoColor3=cA.colors.Torso end)end end;local function cG(bY)if not bU.enabled then return end;local cj=bY==bT;local cH=bU.selected["Hide Own Name"]local cI=bU.selected["Hide Others Names"]if cj and cH or not cj and cI then c9(bY)c5(bY,true)else ca(bY)c5(bY,false)end;local cJ=bU.selected["Hide Own Skin"]local cK=bU.selected["Hide Others Skins"]if cj and cJ or not cj and cK then cC(bY)else cE(bY)end end;local function cL()local function cM(bY)ca(bY)c5(bY,false)cE(bY)end;if bT then cM(bT)end;for G,ci in ipairs(b.Players:GetPlayers())do if ci~=bT then cM(ci)end end end;local function cN()if not bU.enabled then cL()return end;if bT then cG(bT)end;for G,ci in ipairs(b.Players:GetPlayers())do if ci~=bT then cG(ci)end end end;local function cO()if bU._chatConn then bU._chatConn:Disconnect()end;for G,bK in ipairs(bU._legacyChatConns)do pcall(function()bK:Disconnect()end)end;bU._legacyChatConns={}bU._chatConn=nil;if bR and bR.ChatVersion==Enum.ChatVersion.TextChatService then bU._chatConn=n(bR.OnIncomingMessage:Connect(function(a0)if not(bU.enabled and a0)then return end;local cP=a0.TextSource;if not cP then return end;local bY=b.Players:GetPlayerByUserId(cP.UserId)if not bY then return end;local cj=bY==bT;local ce=bU.selected["Hide Own Name"]local cf=bU.selected["Hide Others Names"]if cj and ce or not cj and cf then local cQ=Instance.new("TextChatMessageProperties")cQ.PrefixText="???:"local cd=cc()cQ.Text=cl(a0.Text or"",cd)return cQ end end))return end;local cR=b.ReplicatedStorage;local cS=cR and c0(cR,"DefaultChatSystemChatEvents")if cS then local cT=c0(cS,"OnMessageDoneFiltering")if cT and cT.OnClientEvent then table.insert(bU._legacyChatConns,cT.OnClientEvent:Connect(function(F)if not(bU.enabled and F)then return end;local cU=F.FromSpeaker;local bY=cU and b.Players:FindFirstChild(cU)if not bY then return end;local cj=bY==bT;local ce=bU.selected["Hide Own Name"]local cf=bU.selected["Hide Others Names"]if cj and ce or not cj and cf then F.FromSpeaker="???"if F.Message then local cd=cc()F.Message=cl(F.Message,cd)end;F.ExtraData=F.ExtraData or{}end end))end end end;local function cV()for G,bK in ipairs(bU._cons)do pcall(function()bK:Disconnect()end)end;bU._cons={}if bU._chatConn then bU._chatConn:Disconnect()end;bU._chatConn=nil;for G,bK in ipairs(bU._legacyChatConns)do pcall(function()bK:Disconnect()end)end;bU._legacyChatConns={}cx()end;local function cW()cV()table.insert(bU._cons,bT.CharacterAdded:Connect(function()cy(bT)task.defer(cN)end))table.insert(bU._cons,b.Players.PlayerAdded:Connect(function(bY)table.insert(bU._cons,bY.CharacterAdded:Connect(function()cy(bY)task.defer(function()cG(bY)end)end))if bY.Character then cy(bY)task.defer(function()cG(bY)end)end end))for G,bY in ipairs(b.Players:GetPlayers())do if bY~=bT then table.insert(bU._cons,bY.CharacterAdded:Connect(function()cy(bY)task.defer(function()cG(bY)end)end))if bY.Character then cy(bY)task.defer(function()cG(bY)end)end end end;cO()cr()end;local cX=c.Misc:AddLeftGroupbox("Streamer Mode","video")local cY={"Hide Own Name","Hide Others Names","Hide Own Skin","Hide Others Skins"}cX:AddDropdown("streamer_mode_options",{Text="Affects",Values=cY,Multi=true,Default={},AllowNull=true,Callback=function(cZ)for b3 in pairs(bU.selected)do bU.selected[b3]=false end;if typeof(cZ)=="table"then local c_=false;for b3,X in pairs(cZ)do if type(X)=="boolean"then c_=true;if X and bU.selected[b3]~=nil then bU.selected[b3]=true end end end;if not c_ then for G,X in ipairs(cZ)do if bU.selected[X]~=nil then bU.selected[X]=true end end end end;if bU.enabled then cN()end end})cX:AddToggle("streamer_mode_toggle",{Text="Enable Streamer Mode",Default=false,Callback=function(a6)bU.enabled=a6;if a6 then e:Notify("Please open the roblox menu briefly for the best results.",3)cW()cN()else cN()cV()end end})end;if i.Spectate then local d0=c.Misc:AddLeftGroupbox("Spectate","view")local d1,d2,d3,d4;local d5=d0:AddDropdown("SpectateTarget",{Values={},Default=nil,Multi=false,Text="Select Player"})d0:AddButton({Text="Refresh Players",Func=function()local aq={}for G,d6 in ipairs(b.Players:GetPlayers())do if d6~=d.player then aq[#aq+1]=d6.Name end end;d5:SetValues(aq)end})local d7=d0:AddToggle("SpectateEnabled",{Text="Spectate Player",Default=false})local function d8()if d1 then d1:Disconnect()d1=nil end;d2=nil;if d.humanoid then d.camera.CameraSubject=d.humanoid end end;local function d9(da)d8()d2=da;if not d2 then return end;d1=n(b.RunService.RenderStepped:Connect(function()local c2=d2.Character;if c2 and c2:FindFirstChild("Humanoid")then d.camera.CameraSubject=c2:FindFirstChild("Humanoid")else d8()d7:SetValue(false)end end))end;d7:OnChanged(function()if d7.Value then local b1=d5.Value;local da=b1 and b.Players:FindFirstChild(b1)if da then d9(da)else e:Notify("Select a player to spectate.",3)d7:SetValue(false)end else d8()end end)d5:OnChanged(function(b1)if d7.Value then local da=b1 and b.Players:FindFirstChild(b1)if da then d9(da)end end end)d3=n(b.Players.PlayerAdded:Connect(function()local aq={}for G,d6 in ipairs(b.Players:GetPlayers())do if d6~=d.player then aq[#aq+1]=d6.Name end end;d5:SetValues(aq)end))d4=n(b.Players.PlayerRemoving:Connect(function(db)local aq={}for G,d6 in ipairs(b.Players:GetPlayers())do if d6~=d.player and d6~=db then aq[#aq+1]=d6.Name end end;d5:SetValues(aq)if d2==db then d7:SetValue(false)end end))do local aq={}for G,d6 in ipairs(b.Players:GetPlayers())do if d6~=d.player then aq[#aq+1]=d6.Name end end;d5:SetValues(aq)end;m=function()d8()if d7 and d7.SetValue then d7:SetValue(false)end end end;if h then h:Register(function()if k then k()end;if l then l()end;if m then m()end;for az=#j,1,-1 do local bK=j[az]j[az]=nil;pcall(function()if bK and bK.Disconnect then bK:Disconnect()end end)end end)end end
