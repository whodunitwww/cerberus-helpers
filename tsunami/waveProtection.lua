return function(a)local b=a.Services;local c=a.References;local d=a.Toggles;local e=a.Options;local f=a.Helpers;local g=a.Library;local h=a.Unloader;local i=a.BrainrotTab;local j=a.FloorsFolder;local k=a.TsunamiFolder;local l=a.SpeedShop;local m=i:AddRightGroupbox("Wave Protection","shield")local n={}local o=b.Workspace:FindFirstChild("GapVisuals")or Instance.new("Folder")o.Name="GapVisuals"o.Parent=b.Workspace;local p={}local q={}local r=nil;local function s()table.clear(p)table.clear(q)table.insert(q,"Home")if l then p["Home"]=l end;local t=j:GetChildren()local u=0;for v,w in pairs(t)do if w:IsA("BasePart")or w:IsA("Model")or w:IsA("Folder")then if not p[w.Name]then table.insert(q,w.Name)p[w.Name]=w;u=u+1 end end end;table.sort(q,function(x,y)return x<y end)if r then r:SetValues(q)if not table.find(q,r.Value)then r:SetValue(q[1])end end end;task.spawn(function()while true do s()task.wait(3)end end)local function z()table.clear(n)if d.Brainrot_ESP and d.Brainrot_ESP.Value then o:ClearAllChildren()end;local A={}for v,B in pairs(j:GetDescendants())do if B:IsA("BasePart")then table.insert(A,B)end end;table.sort(A,function(x,y)return x.Position.X<y.Position.X end)local C=0;local D=0;for E=1,#A-1 do local F=A[E]local G=A[E+1]local H=F.Position.X+F.Size.X/2;local I=G.Position.X-G.Size.X/2;local J=I-H;local K=F.Position.Y+F.Size.Y/2;if J>1 then if C==0 then C=J;D=F.Size.Z end;local L=H+J/2;local M=F.Position.Z;local N=CFrame.new(L,K-3,M)table.insert(n,N)if d.Brainrot_ESP and d.Brainrot_ESP.Value then local O=Instance.new("Part")O.Name="SafeBridge"O.Anchored=true;O.CanCollide=false;O.Material=Enum.Material.Neon;O.Color=Color3.fromRGB(170,0,255)O.Transparency=0.5;O.Size=Vector3.new(J,0.2,F.Size.Z)O.CFrame=CFrame.new(L,K,M)O.Parent=o end end end;if#A>0 and C>0 then local P=A[1]local Q=P.Position.X-P.Size.X/2;local R=Q-C/2;local K=P.Position.Y+P.Size.Y/2;local S=CFrame.new(R,K-3,P.Position.Z)table.insert(n,S)if d.Brainrot_ESP and d.Brainrot_ESP.Value then local O=Instance.new("Part")O.Name="FirstBridge"O.Anchored=true;O.CanCollide=false;O.Material=Enum.Material.Neon;O.Color=Color3.fromRGB(170,0,255)O.Transparency=0.5;O.Size=Vector3.new(C,0.2,D)O.CFrame=CFrame.new(R,K,P.Position.Z)O.Parent=o end end end;j.DescendantAdded:Connect(z)j.DescendantRemoving:Connect(z)m:AddToggle("Brainrot_ESP",{Text="Safe Gap ESP",Default=false,Callback=function(T)if T then z()else o:ClearAllChildren()end end})m:AddToggle("Brainrot_Dodge",{Text="Auto Dodge Waves",Default=false,Tooltip="Prioritized over Travel (Auto Travel always uses this)"})m:AddToggle("Brainrot_WaveMonitor",{Text="Wave Monitor UI",Default=false,Tooltip="Shows a UI list of incoming waves."})m:AddDivider()r=m:AddDropdown("Brainrot_TargetArea",{Values=q,Default=1,Multi=false,Text="Select Area",Tooltip="Where do you want to go?"})m:AddButton("Refresh Areas",function()s()end)m:AddToggle("Brainrot_Travel",{Text="Auto Travel",Default=false,Tooltip="Runs to the gap before the selected area at 150 Speed"})local U=nil;local V={}local function W()for v,X in ipairs(V)do pcall(function()X:Disconnect()end)end;table.clear(V)end;local function Y()W()if U then U:Destroy()U=nil end end;local function Z()local _=gethui and gethui()or b.CoreGui;local a0=_ and _:FindFirstChild("TsunamiMonitor")if a0 then a0:Destroy()end;local a1=Instance.new("ScreenGui")a1.Name="TsunamiMonitor"a1.ResetOnSpawn=false;pcall(function()a1.Parent=_ end)if not a1.Parent then a1.Parent=c.player:WaitForChild("PlayerGui")end;U=a1;local a2=Instance.new("Frame")a2.Name="MainFrame"a2.Size=UDim2.new(0,260,0,240)a2.Position=UDim2.new(0,50,0,50)a2.BackgroundColor3=Color3.fromRGB(25,25,25)a2.BorderSizePixel=0;a2.Parent=a1;local a3=Instance.new("UICorner")a3.CornerRadius=UDim.new(0,8)a3.Parent=a2;local a4=Instance.new("TextLabel")a4.Size=UDim2.new(1,0,0,30)a4.BackgroundColor3=Color3.fromRGB(40,40,40)a4.Text="Wave Monitor"a4.TextColor3=Color3.new(1,1,1)a4.Font=Enum.Font.GothamBold;a4.TextSize=14;a4.Parent=a2;local a5=Instance.new("UICorner")a5.CornerRadius=UDim.new(0,8)a5.Parent=a4;local a6=Instance.new("Frame")a6.Name="ListContainer"a6.Position=UDim2.new(0,10,0,40)a6.Size=UDim2.new(1,-20,1,-50)a6.BackgroundTransparency=1;a6.Parent=a2;local a7=Instance.new("UIListLayout")a7.Padding=UDim.new(0,6)a7.SortOrder=Enum.SortOrder.LayoutOrder;a7.Parent=a6;local function a8(a9)local aa=Instance.new("Frame")aa.Name="Slot_"..a9;aa.LayoutOrder=a9;if a9==1 then aa.Size=UDim2.new(1,0,0,50)aa.BackgroundColor3=Color3.fromRGB(35,35,35)else aa.Size=UDim2.new(1,0,0,40)aa.BackgroundColor3=Color3.fromRGB(30,30,30)end;aa.BorderSizePixel=0;aa.Parent=a6;local ab=Instance.new("UICorner")ab.CornerRadius=UDim.new(0,6)ab.Parent=aa;local ac=Instance.new("Frame")ac.Name="Accent"ac.Size=UDim2.new(0,4,1,0)ac.BorderSizePixel=0;ac.Parent=aa;local ad=Instance.new("UICorner")ad.CornerRadius=UDim.new(0,4)ad.Parent=ac;local ae=Instance.new("TextLabel")ae.Name="WaveName"ae.Size=UDim2.new(1,-15,0.4,0)ae.Position=UDim2.new(0,10,0,4)ae.BackgroundTransparency=1;ae.TextXAlignment=Enum.TextXAlignment.Left;ae.Font=Enum.Font.GothamBold;ae.TextSize=10;ae.Parent=aa;local af=Instance.new("TextLabel")af.Name="Distance"af.Size=UDim2.new(1,-15,0.6,0)af.Position=UDim2.new(0,10,0.4,-4)af.BackgroundTransparency=1;af.TextXAlignment=Enum.TextXAlignment.Left;af.Font=Enum.Font.GothamBlack;af.TextSize=a9==1 and 20 or 16;af.Parent=aa;return aa end;local ag={}for E=1,4 do ag[E]=a8(E)ag[E].Visible=false end;local ah,ai,aj,ak;V[#V+1]=a4.InputBegan:Connect(function(al)if al.UserInputType==Enum.UserInputType.MouseButton1 or al.UserInputType==Enum.UserInputType.Touch then ah=true;aj=al.Position;ak=a2.Position;V[#V+1]=al.Changed:Connect(function()if al.UserInputState==Enum.UserInputState.End then ah=false end end)end end)V[#V+1]=a4.InputChanged:Connect(function(al)if al.UserInputType==Enum.UserInputType.MouseMovement or al.UserInputType==Enum.UserInputType.Touch then ai=al end end)V[#V+1]=b.UserInputService.InputChanged:Connect(function(al)if al==ai and ah then local am=al.Position-aj;a2.Position=UDim2.new(ak.X.Scale,ak.X.Offset+am.X,ak.Y.Scale,ak.Y.Offset+am.Y)end end)local function an(ao)local ap=ao:FindFirstChild("Hitbox")if not ap then return nil end;local aq="Unknown"local ar=ap:FindFirstChild("BillboardGui")if ar and ar:FindFirstChild("Frame")and ar.Frame:FindFirstChild("Info")then aq=ar.Frame.Info.Text end;local as=Color3.new(1,1,1)local at=ao:FindFirstChild("TsunamiWave")if at then as=at.Color end;return{Name=aq,Color=as,X=ap.Position.X}end;local function au()local av=c.player.Character;if not av then return end;local aw=av:FindFirstChild("HumanoidRootPart")if not aw then return end;local ax=aw.Position.X;local ay=b.Workspace:FindFirstChild("ActiveTsunamis")local az={}if ay then for v,aA in ipairs(ay:GetChildren())do local aB=an(aA)if aB and aB.X>ax then aB.Distance=math.floor(aB.X-ax)table.insert(az,aB)end end end;table.sort(az,function(x,y)return x.Distance<y.Distance end)for E=1,4 do local aC=ag[E]local aB=az[E]if aB then aC.Visible=true;aC.Accent.BackgroundColor3=aB.Color;aC.WaveName.Text=(E==1 and"IMMINENT: "or"")..aB.Name:upper()aC.WaveName.TextColor3=Color3.fromRGB(150,150,150)aC.Distance.Text=aB.Distance.." studs"aC.Distance.TextColor3=aB.Color else aC.Visible=false end end;if#az==0 then ag[1].Visible=true;ag[1].Accent.BackgroundColor3=Color3.fromRGB(100,255,100)ag[1].WaveName.Text="STATUS"ag[1].WaveName.TextColor3=Color3.fromRGB(150,150,150)ag[1].Distance.Text="CLEAR"ag[1].Distance.TextColor3=Color3.fromRGB(100,255,100)end end;V[#V+1]=b.RunService.RenderStepped:Connect(au)end;local function aD()if U then return end;Z()end;local function aE()Y()end;d.Brainrot_WaveMonitor:OnChanged(function()if d.Brainrot_WaveMonitor.Value then aD()else aE()end end)if d.Brainrot_WaveMonitor.Value then aD()end;if h and h.Register then h:Register(aE)end;local aF=120;local aG=150;local aH=150;local aI={}local aJ=false;local aK=nil;b.RunService.Heartbeat:Connect(function()if not c.humanoidRootPart then return end;local aL=c.humanoidRootPart;local aM=aL.Position;local aN=false;local aO=d.Brainrot_Dodge and d.Brainrot_Dodge.Value or d.Brainrot_Travel and d.Brainrot_Travel.Value;if aO then for v,aP in pairs(k:GetChildren())do local aQ=aP:FindFirstChild("Hitbox")if aQ and not aI[aP]then local aR=aQ.Position.X-aM.X;if aR>0 and aR<aF then aN=true;if not aJ then aJ=true;if aK then aK()aK=nil end;local aS=nil;local aT=false;local S,aU;local aV,aW=99999,99999;for v,aX in pairs(n)do local aY=math.abs(aX.Position.X-aM.X)if(aX.Position-aM).Magnitude<6 then aT=true;aS=aX;break end;local aZ=aX.Position.X-aM.X;if aZ<0 then if aY<aV then aV=aY;S=aX end else if aY<aW then aW=aY;aU=aX end end end;if not aT then if aU and aW<aV*0.25 then aS=aU else aS=S end end;if aS then aI[aP]=true;g:Notify("Dodging...")task.spawn(function()if not aT then local a_=f.MoveToPos(aS.Position,aG)local b0=os.clock()while os.clock()-b0<2 do if not c.humanoidRootPart then break end;if(aL.Position-aS.Position).Magnitude<8 then a_()break end;b.RunService.Heartbeat:Wait()end;a_()end;c.character:PivotTo(aS)aL.Anchored=true;aL.Velocity=Vector3.zero;repeat b.RunService.Heartbeat:Wait()if not aP.Parent then break end until aQ.Position.X<aS.Position.X-5;aL.Anchored=false;aJ=false;task.delay(1,function()aI[aP]=nil end)end)else aJ=false end end end end end end;if d.Brainrot_Travel.Value and not aJ and not aN then local b1=e.Brainrot_TargetArea.Value;local b2=nil;if b1=="Home"then if l then b2=l:GetPivot().Position end else local b3=p[b1]if b3 then local b4=nil;local b5=999999;local b6={}if b3:IsA("BasePart")then table.insert(b6,b3)else for v,b7 in pairs(b3:GetDescendants())do if b7:IsA("BasePart")then table.insert(b6,b7)end end end;for v,B in pairs(b6)do if B.Position.X<b5 then b5=B.Position.X;b4=B end end;if b4 then local b8=nil;local b9=999999;for v,aX in pairs(n)do local ba=b4.Position.X-b4.Size.X/2;local bb=ba-aX.Position.X;if math.abs(bb)<b9 then b9=math.abs(bb)b8=aX end end;if b8 then b2=b8.Position end end end end;if b2 then if not aK then aK=f.MoveToPos(b2,aH)end;if(aL.Position-b2).Magnitude<8 then if aK then aK()aK=nil end;d.Brainrot_Travel:SetValue(false)g:Notify("Arrived at "..b1)end end else if aK then aK()aK=nil end end end)s()z()end
