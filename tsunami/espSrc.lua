return function(a)local b=a.Services;local c=a.Tabs;local d=a.References;local e=a.Library;local f=a.Options;local g=a.Toggles;local h=a.Unloader;local i=a.SenseSrc;local j=a.ESPConfig or{}local k=j.Debug==true;local l={}local function m(n,o)if l[n]then return end;l[n]=true;if e and e.Notify then e:Notify(o,6)else warn(o)end end;if j.Enabled~=true then return end;local p={}local q={}local function r(s)if s then p[#p+1]=s end;return s end;local t={universal={textSize={Default=13,Min=10,Max=28},tracerOrigin={Default="Bottom",Values={"Bottom","Middle","Top"}},limitRange={Default=false},maxRange={Default=150,Min=50,Max=2000}}}local function u(v,w)local x={}if type(w)=="table"then for y,z in pairs(w)do x[y]=z end end;if type(v)=="table"then for y,z in pairs(v)do x[y]=z end end;if x.Default==nil then x.Default=x.default end;if x.Min==nil then x.Min=x.min end;if x.Max==nil then x.Max=x.max end;if x.Values==nil then x.Values=x.values end;return x end;local function A(B,w)local C=f and f[B]if C and C.Value~=nil then return C.Value end;return w end;local function D(B,w)local E=g and g[B]if E and E.Value~=nil then return E.Value end;return w end;local function F(G)if G==nil or G==false then return false end;if type(G)=="table"and G.Enabled==false then return false end;return true end;local function H(G,n,w)if type(G)=="table"and G[n]~=nil then return G[n]end;return w end;local I=j.Universal or j.universal;if not I and j.CONFIG and j.CONFIG.universal then I=j.CONFIG.universal end;I=I or{}local J=u(I.TextSize or I.textSize,t.universal.textSize)local K=u(I.TracerOrigin or I.tracerOrigin,t.universal.tracerOrigin)local L=u(I.LimitRange or I.limitRange,t.universal.limitRange)local M=u(I.MaxRange or I.maxRange,t.universal.maxRange)local N=I.Enabled~=false;local O=j.Groups or j.groups;if not O and j.CONFIG and j.CONFIG.groups then O=j.CONFIG.groups end;O=O or{}local P=j.Objects or j.objects;if not P and j.CONFIG and j.CONFIG.objects then P=j.CONFIG.objects end;P=P or{}local Q=P.Types or P.types or j.ObjectsTypes or{}local R=P.Enabled~=false;local S={SENSE=nil,SenseInstCache={},SenseInstConn={},Objects={Types=R and Q or{},Caches={},Connections={},LastRescan=0}}local function T(U)if not U then return{}end;if typeof(U)=="string"then return{[U]=true}end;if typeof(U)~="table"then return{}end;local x={}if#U>0 then for V,z in ipairs(U)do if z~=nil then x[tostring(z)]=true end end;return x end;for y,z in pairs(U)do if z then x[tostring(y)]=true end end;return x end;local function W()local X={}local Y=b.Workspace:FindFirstChild("ActiveBrainrots")if Y then for V,Z in ipairs(Y:GetChildren())do if Z:IsA("Folder")then X[#X+1]=Z.Name end end end;table.sort(X)return X end;local function _(a0,a1)return Color3.new(math.clamp(a0.R*a1,0,1),math.clamp(a0.G*a1,0,1),math.clamp(a0.B*a1,0,1))end;local function a2(a3)if not a3 then return Color3.new(1,1,1)end;local n=string.lower(tostring(a3))local a4={common=Color3.fromRGB(210,210,210),uncommon=Color3.fromRGB(110,220,120),rare=Color3.fromRGB(90,150,255),epic=Color3.fromRGB(190,110,255),legendary=Color3.fromRGB(255,200,70),mythical=Color3.fromRGB(255,120,200),cosmic=Color3.fromRGB(80,220,255),celestial=Color3.fromRGB(140,255,255),secret=Color3.fromRGB(255,90,90)}return a4[n]or Color3.new(1,1,1)end;local function a5(a6,Y)if not a6 then return nil end;Y=Y or b.Workspace:FindFirstChild("ActiveBrainrots")if not Y then return nil end;local a7=a6;while a7 and a7.Parent do if a7.Parent==Y then return a7.Name end;a7=a7.Parent end;return nil end;local function a8(a6,a9,aa)if aa and aa~=a6 then local ab=aa:GetAttribute(a9)if ab~=nil then return ab end end;if not a6 then return nil end;local ab=a6:GetAttribute(a9)if ab~=nil then return ab end;local ac=a6.Parent;if ac then ab=ac:GetAttribute(a9)if ab~=nil then return ab end end;return nil end;local function ad(a6,a3,ae,af,ag,ah)local a9=ah or a6 and a6.Name or"Unknown"local ai=tonumber(ae)if ai and ai>=0 then return string.format("Lvl %d %s",ai,a9)end;return a9 end;local function aj(a6,ak)if not a6 then return nil,ak end;if a6:IsA("Model")then local al=a6:FindFirstChildWhichIsA("BasePart",true)if not al then return nil,ak end;ak=ak or{}if not ak.source then ak.source=a6 end;if not ak.name then ak.name=a6.Name end end;return a6,ak end;local function am(an)if typeof(an)=="Instance"then return an,nil end;if type(an)=="table"then local a6=an.instance or an.inst or an.model or an.object;if typeof(a6)=="Instance"then return a6,an end end;return nil,nil end;local function ao(a6,ap)local aq=S.SENSE and S.SENSE._instanceCache;local ar=aq and aq[a6]if ar then ar.customOptions=ap end end;local function as()if not S.SENSE or S.SENSE.__CerberusPatched then return end;S.SENSE.__CerberusPatched=true;local at=S.SENSE.getCharacter;local au=S.SENSE.getHealth;local function av(aw)if typeof(aw)~="Instance"then return nil end;local ax;if aw:IsA("Player")then ax=aw.Character elseif aw:IsA("Model")then ax=aw elseif at then local ay,az=pcall(at,aw)if ay then ax=az end end;if not ax then return nil end;local aA=ax:FindFirstChildOfClass("Humanoid")if not aA then return nil end;if aA.Health<=0 or aA:GetState()==Enum.HumanoidStateType.Dead then return nil end;return ax end;function S.SENSE.getCharacter(aw)return av(aw)end;function S.SENSE.getHealth(aw)local ax=av(aw)local aA=ax and ax:FindFirstChildOfClass("Humanoid")if aA then return aA.Health,aA.MaxHealth end;local ae=a8(aw,"Level",ax)if ae~=nil then local aB=a8(aw,"MaxLevel",ax)or a8(aw,"LevelMax",ax)or 100;local aC=tonumber(ae)or 0;local aD=tonumber(aB)or 100;if aD<=0 then aD=100 end;return aC,aD end;return 0,0 end end;local function aE()if not S.SENSE then return end;local aF=A("ESP_TracerOrigin",K.Default)S.SENSE.sharedSettings.textSize=A("ESP_TextSize",J.Default)S.SENSE.sharedSettings.limitDistance=D("ESP_LimitRange",L.Default)S.SENSE.sharedSettings.maxDistance=A("ESP_MaxRange",M.Default)S.SENSE.teamSettings.enemy.tracerOrigin=aF;S.SENSE.teamSettings.friendly.tracerOrigin=aF;if S.SENSE.instanceSettings then S.SENSE.instanceSettings.tracerOrigin=aF end end;local function aG()if not S.SENSE then if type(Drawing)~="table"or type(Drawing.new)~="function"then m("drawing","ESP: Drawing API not available. ESP cannot render.")return false end;if type(i)~="string"then m("sense_src","ESP: Sense source missing or invalid.")return false end;local ay,aH=pcall(loadstring,i)if not ay or type(aH)~="function"then m("sense_load","ESP: Failed to load Sense module."..(k and" "..tostring(aH)or""))return false end;local aI,aJ=pcall(aH)if not aI or type(aJ)~="table"then m("sense_ctor","ESP: Sense module failed to initialize."..(k and" "..tostring(aJ)or""))return false end;S.SENSE=aJ end;if not S.SENSE then return false end;if not S.SENSE._hasLoaded and S.SENSE.Load then pcall(S.SENSE.Load)end;as()aE()return true end;local aK=false;local function aL()if not g then return false end;for V,aM in ipairs(O)do if aM and aM.key then local E=g[aM.key.."_Enable"]if E and E.Value then return true end end end;return false end;local function aN()for V,aO in pairs(q)do pcall(aO)end end;local function aP()if aK then return end;aK=true;task.spawn(function()local aQ=0;while aQ<30 do aQ=aQ+1;if aG()then aN()break end;if not aL()then break end;task.wait(0.5)end;aK=false end)end;local function aR(B,aS)local aF=g[B]or f[B]if aF and aF.OnChanged then aF:OnChanged(aS)end end;if N then local aT=c.ESP:AddLeftGroupbox("Universal","settings")if J.Enabled~=false then aT:AddSlider("ESP_TextSize",{Text="Text Size",Default=J.Default,Min=J.Min,Max=J.Max,Rounding=0})end;if K.Enabled~=false then aT:AddDropdown("ESP_TracerOrigin",{Text="Tracer Origin",Values=K.Values,Default=K.Default})end;if L.Enabled~=false then aT:AddToggle("ESP_LimitRange",{Text="Limit Range",Default=L.Default})end;if M.Enabled~=false then aT:AddSlider("ESP_MaxRange",{Text="Range (studs)",Default=M.Default,Min=M.Min,Max=M.Max,Rounding=0})end end;aR("ESP_TextSize",function()if aG()then aE()end end)aR("ESP_TracerOrigin",function()if aG()then aE()end end)aR("ESP_LimitRange",function()if aG()then aE()end end)aR("ESP_MaxRange",function()if aG()then aE()end end)local function aU(aM,aV)local aW=aV=="left"and c.ESP.AddLeftGroupbox or c.ESP.AddRightGroupbox;local aX=aW(c.ESP,aM.title,aM.icon or"users")aX:AddToggle(aM.key.."_Enable",{Text="Enable "..aM.title,Default=false})aX:AddDropdown(aM.key.."_Side",{Text="Apply To",Values={"Enemy","Friendly","Both"},Default=aM.sideDefault or"Enemy"})local aY=aM.features and aM.features.box;if F(aY)then aX:AddToggle(aM.key.."_Box",{Text="Boxes",Default=H(aY,"Default",true)}):AddColorPicker(aM.key.."_BoxColor",{Default=H(aY,"color",Color3.new(1,1,1))})aX:AddToggle(aM.key.."_BoxOutline",{Text="Box Outline",Default=H(aY,"outline",true)})aX:AddToggle(aM.key.."_BoxFill",{Text="Box Fill",Default=H(aY,"fill",false)})aX:AddSlider(aM.key.."_BoxFillAlpha",{Text="Fill Alpha",Default=H(aY,"fillAlpha",35),Min=0,Max=100})end;local aZ=aM.features and aM.features.name;if F(aZ)then aX:AddToggle(aM.key.."_Name",{Text="Names",Default=H(aZ,"Default",true)}):AddColorPicker(aM.key.."_NameColor",{Default=H(aZ,"color",Color3.new(1,1,1))})end;local a_=aM.features and aM.features.customText;if F(a_)then aX:AddToggle(aM.key.."_CustomText",{Text="Details",Default=H(a_,"Default",true)}):AddColorPicker(aM.key.."_CustomTextColor",{Default=H(a_,"color",Color3.new(1,1,1))})end;local b0=aM.features and aM.features.distance;if F(b0)then aX:AddToggle(aM.key.."_Distance",{Text="Distance",Default=H(b0,"Default",false)}):AddColorPicker(aM.key.."_DistColor",{Default=H(b0,"color",Color3.new(1,1,1))})end;local b1=aM.features and aM.features.healthBar;if F(b1)then local b2=aM.healthBarLabel or"Health Bar"aX:AddToggle(aM.key.."_HealthBar",{Text=b2,Default=H(b1,"Default",true)})end;local b3=aM.features and aM.features.weapon;if F(b3)then aX:AddToggle(aM.key.."_Weapon",{Text="Weapon",Default=H(b3,"Default",false)})end;local K=aM.features and aM.features.tracer;if F(K)then aX:AddToggle(aM.key.."_Tracer",{Text="Tracer",Default=H(K,"Default",false)}):AddColorPicker(aM.key.."_TracerColor",{Default=H(K,"color",Color3.new(1,1,1))})end;local b4=aM.features and aM.features.chams;if F(b4)then aX:AddToggle(aM.key.."_Chams",{Text="Chams",Default=H(b4,"Default",true)})end;local function b5()if not aG()then aP()return end;local b6=A(aM.key.."_Side",aM.sideDefault or"Enemy")local b7=b6=="Both"and{"enemy","friendly"}or{b6:lower()}for V,b8 in ipairs(b7)do local E=S.SENSE.teamSettings[b8]if E then E.enabled=D(aM.key.."_Enable",false)if F(aY)then E.box=D(aM.key.."_Box",H(aY,"Default",true))E.boxOutline=D(aM.key.."_BoxOutline",H(aY,"outline",true))E.boxFill=D(aM.key.."_BoxFill",H(aY,"fill",false))local b9=A(aM.key.."_BoxFillAlpha",H(aY,"fillAlpha",35))local ba=A(aM.key.."_BoxColor",H(aY,"color",Color3.new(1,1,1)))E.boxColor={ba,1}E.boxFillColor={ba,b9/100}else E.box=false;E.boxOutline=false;E.boxFill=false end;if F(aZ)then E.name=D(aM.key.."_Name",H(aZ,"Default",true))E.nameColor={A(aM.key.."_NameColor",H(aZ,"color",Color3.new(1,1,1))),1}else E.name=false end;if F(b0)then E.distance=D(aM.key.."_Distance",H(b0,"Default",false))E.distanceColor={A(aM.key.."_DistColor",H(b0,"color",Color3.new(1,1,1))),1}else E.distance=false end;if F(b1)then E.healthBar=D(aM.key.."_HealthBar",H(b1,"Default",true))else E.healthBar=false end;if F(b3)then E.weapon=D(aM.key.."_Weapon",H(b3,"Default",false))else E.weapon=false end;if F(K)then E.tracer=D(aM.key.."_Tracer",H(K,"Default",false))E.tracerColor={A(aM.key.."_TracerColor",H(K,"color",Color3.new(1,1,1))),1}else E.tracer=false end;if F(b4)then E.chams=D(aM.key.."_Chams",H(b4,"Default",true))else E.chams=false end end end;aE()end;q[aM.key]=b5;aR(aM.key.."_Enable",b5)for V,B in ipairs({aM.key.."_Side",aM.key.."_Box",aM.key.."_BoxFill",aM.key.."_BoxFillAlpha",aM.key.."_BoxOutline",aM.key.."_Name",aM.key.."_Distance",aM.key.."_HealthBar",aM.key.."_Weapon",aM.key.."_Tracer",aM.key.."_Chams",aM.key.."_BoxColor",aM.key.."_NameColor",aM.key.."_CustomTextColor",aM.key.."_DistColor",aM.key.."_TracerColor",aM.key.."_RarityFilter",aM.key.."_MinLevel"})do aR(B,b5)end end;local function bb(aM)if not S.SENSE then return end;local aq=S.SenseInstCache[aM.key]if not aq then return end;for a6 in pairs(aq)do pcall(function()if S.SENSE.RemoveInstance then S.SENSE.RemoveInstance(a6)elseif S.SENSE.RemoveInstances then S.SENSE.RemoveInstances({a6})end end)end;S.SenseInstCache[aM.key]={}end;local function bc(aM)if not aG()then aP()return end;local bd=S.SENSE.instanceSettings;if not bd then return end;local n=aM.key;local be=aM.features or{}bd.enabled=D(n.."_Enable",false)local aY=be.box;if F(aY)then bd.box=D(n.."_Box",H(aY,"Default",true))bd.boxColor={A(n.."_BoxColor",H(aY,"color",Color3.new(1,1,1))),1}bd.boxOutlineColor={Color3.new(),1}bd.boxFillColor={A(n.."_BoxColor",H(aY,"color",Color3.new(1,1,1))),A(n.."_BoxFillAlpha",H(aY,"fillAlpha",25))/100}bd.boxOutline=D(n.."_BoxOutline",H(aY,"outline",true))bd.boxFill=D(n.."_BoxFill",H(aY,"fill",false))else bd.box=false;bd.boxOutline=false;bd.boxFill=false end;local aZ=be.name;if F(aZ)then bd.name=D(n.."_Name",H(aZ,"Default",true))bd.nameColor={A(n.."_NameColor",H(aZ,"color",Color3.new(1,1,1))),1}else bd.name=false end;local b0=be.distance;if F(b0)then bd.distance=D(n.."_Distance",H(b0,"Default",true))bd.distanceColor={A(n.."_DistColor",H(b0,"color",Color3.new(1,1,1))),1}else bd.distance=false end;local a_=be.customText;if F(a_)then bd.customText=D(n.."_CustomText",H(a_,"Default",true))bd.customTextColor={A(n.."_CustomTextColor",H(a_,"color",Color3.new(1,1,1))),1}bd.customTextOutline=true;bd.customTextOutlineColor=Color3.new()else bd.customText=false end;local bf=be.tracer;if F(bf)then bd.tracer=D(n.."_Tracer",H(bf,"Default",true))bd.tracerColor={A(n.."_TracerColor",H(bf,"color",Color3.new(1,1,1))),1}bd.tracerOutline=true else bd.tracer=false end;local b1=be.healthBar;if F(b1)then bd.healthBar=D(n.."_HealthBar",H(b1,"Default",true))else bd.healthBar=false end;local b4=be.chams;if F(b4)then bd.chams=D(n.."_Chams",H(b4,"Default",true))else bd.chams=false end;aE()end;local function bg(aM)if not aG()then aP()return end;S.SenseInstCache[aM.key]=S.SenseInstCache[aM.key]or{}local aq=S.SenseInstCache[aM.key]local bh={}local ay,bi=pcall(aM.selector,b.Workspace)if ay and type(bi)=="table"then bh=bi end;local be=aM.features or{}local a_=be.customText;local bj=F(a_)and D(aM.key.."_CustomText",H(a_,"Default",true))local aZ=be.name;local bk=F(aZ)and D(aM.key.."_Name",H(aZ,"Default",true))local b1=be.healthBar;local bl=F(b1)and D(aM.key.."_HealthBar",H(b1,"Default",true))local bm=aM.filters or{}local bn=nil;local bo=nil;if bm.rarity and bm.rarity.Enabled~=false then bn=T(A(aM.key.."_RarityFilter",{}))if bn and next(bn)==nil then bn=nil end end;if bm.level and bm.level.Enabled~=false then local bp=bm.level.Default or 0;bo=tonumber(A(aM.key.."_MinLevel",bp))or bp end;local bq=b.Workspace:FindFirstChild("ActiveBrainrots")local br={}if#bh>0 then for V,an in ipairs(bh)do local a6,ak=am(an)if a6 and a6.Parent then local bs=true;local bt=nil;if aM.key=="Brainrots"then a6,ak=aj(a6,ak)if not a6 then bs=false end;if bs then local bu=ak and ak.source or a6;local a3=ak and ak.rarity or a5(bu,bq)or a5(a6,bq)if bn and not bn[a3 or""]then bs=false end;local bv=a8(a6,"Level",bu)local bw=tonumber(bv)or 0;if bo and bw<bo then bs=false end;if bs then local af=a8(a6,"Mutation",bu)local ag=a8(a6,"TimeLeft",bu)local bx=ad(a6,a3,bv,af,ag,ak and ak.name)local by=a2(a3)local bz=_(by,0.85)bt={box=false,boxFill=false,boxOutline=false,distance=false,tracer=false,healthBar=false,chams=false,box3d=false,customText=bj,customTextValue=bj and bx or"",customTextColor={bz,1},name=bk,nameColor={by,1}}end end end;if bs then br[a6]=true;if not aq[a6]then aq[a6]=true;pcall(function()if S.SENSE.AddInstances then S.SENSE.AddInstances({a6},bt)elseif S.SENSE.AddInstance then S.SENSE.AddInstance(a6,S.SENSE.instanceSettings or{})end end)end;ao(a6,bt)end end end end;for a6 in pairs(aq)do if not a6.Parent or not br[a6]then aq[a6]=nil;pcall(function()if S.SENSE.RemoveInstance then S.SENSE.RemoveInstance(a6)elseif S.SENSE.RemoveInstances then S.SENSE.RemoveInstances({a6})end end)end end end;local function bA(aM)if not aG()then aP()return end;bc(aM)bg(aM)if S.SenseInstConn[aM.key]then S.SenseInstConn[aM.key]:Disconnect()end;S.SenseInstConn[aM.key]=r(b.RunService.Heartbeat:Connect(function()if not D(aM.key.."_Enable",false)then return end;if tick()%0.5<0.02 then bc(aM)bg(aM)end end))end;local function bB(aM)if S.SenseInstConn[aM.key]then S.SenseInstConn[aM.key]:Disconnect()S.SenseInstConn[aM.key]=nil end;bb(aM)if S.SENSE and S.SENSE.instanceSettings then S.SENSE.instanceSettings.enabled=false end end;local function bC(aM,aV)local aW=aV=="left"and c.ESP.AddLeftGroupbox or c.ESP.AddRightGroupbox;local aX=aW(c.ESP,aM.title,aM.icon or"user-cog")aX:AddToggle(aM.key.."_Enable",{Text="Enable "..aM.title,Default=false})local aY=aM.features and aM.features.box;if F(aY)then aX:AddToggle(aM.key.."_Box",{Text="Boxes",Default=H(aY,"Default",true)}):AddColorPicker(aM.key.."_BoxColor",{Default=H(aY,"color",Color3.new(1,1,1))})aX:AddToggle(aM.key.."_BoxOutline",{Text="Box Outline",Default=H(aY,"outline",true)})aX:AddToggle(aM.key.."_BoxFill",{Text="Box Fill",Default=H(aY,"fill",false)})aX:AddSlider(aM.key.."_BoxFillAlpha",{Text="Fill Alpha",Default=H(aY,"fillAlpha",25),Min=0,Max=100})end;local aZ=aM.features and aM.features.name;if F(aZ)then aX:AddToggle(aM.key.."_Name",{Text="Names",Default=H(aZ,"Default",true)}):AddColorPicker(aM.key.."_NameColor",{Default=H(aZ,"color",Color3.new(1,1,1))})end;local a_=aM.features and aM.features.customText;if F(a_)then aX:AddToggle(aM.key.."_CustomText",{Text="Details",Default=H(a_,"Default",true)}):AddColorPicker(aM.key.."_CustomTextColor",{Default=H(a_,"color",Color3.new(1,1,1))})end;local b0=aM.features and aM.features.distance;if F(b0)then aX:AddToggle(aM.key.."_Distance",{Text="Distance",Default=H(b0,"Default",true)}):AddColorPicker(aM.key.."_DistColor",{Default=H(b0,"color",Color3.new(1,1,1))})end;local bf=aM.features and aM.features.tracer;if F(bf)then aX:AddToggle(aM.key.."_Tracer",{Text="Tracer",Default=H(bf,"Default",true)}):AddColorPicker(aM.key.."_TracerColor",{Default=H(bf,"color",Color3.new(1,1,1))})end;local b1=aM.features and aM.features.healthBar;if F(b1)then local b2=aM.healthBarLabel or"Health Bar"aX:AddToggle(aM.key.."_HealthBar",{Text=b2,Default=H(b1,"Default",true)})end;local b4=aM.features and aM.features.chams;if F(b4)then aX:AddToggle(aM.key.."_Chams",{Text="Chams",Default=H(b4,"Default",true)})end;local bm=aM.filters;if type(bm)=="table"then local bD=bm.rarity;if bD and bD.Enabled~=false then local X=bD.Values;if type(X)~="table"or#X==0 then X=aM.key=="Brainrots"and W()or{}end;if#X>0 then aX:AddDropdown(aM.key.."_RarityFilter",{Text="Rarities",Values=X,Default=X,Multi=true})end end;local bE=bm.level;if bE and bE.Enabled~=false then aX:AddSlider(aM.key.."_MinLevel",{Text="Min Level",Default=bE.Default or 0,Min=bE.Min or 0,Max=bE.Max or 100,Rounding=0})end end;local function bF()if D(aM.key.."_Enable",false)then bA(aM)else bB(aM)end end;aR(aM.key.."_Enable",bF)for V,B in ipairs({aM.key.."_Box",aM.key.."_BoxOutline",aM.key.."_BoxFill",aM.key.."_BoxFillAlpha",aM.key.."_Name",aM.key.."_CustomText",aM.key.."_CustomTextColor",aM.key.."_Distance",aM.key.."_Tracer",aM.key.."_HealthBar",aM.key.."_Chams",aM.key.."_BoxColor",aM.key.."_NameColor",aM.key.."_DistColor",aM.key.."_TracerColor",aM.key.."_RarityFilter",aM.key.."_MinLevel","ESP_TextSize","ESP_TracerOrigin","ESP_LimitRange","ESP_MaxRange"})do aR(B,bF)end;q[aM.key]=bF end;local bG;if#S.Objects.Types>0 then bG=c.ESP:AddRightGroupbox("Other ESP","eye")for V,v in ipairs(S.Objects.Types)do bG:AddToggle(v.key,{Text=v.label,Default=false}):AddColorPicker(v.key.."_Color",{Default=Color3.new(1,1,1)})end end;local function bH(bI)local aq=S.Objects.Caches[bI]if not aq then return end;for a6,ar in pairs(aq)do if ar and ar.Remove then pcall(function()ar:Remove()end)elseif ar and typeof(ar)=="table"and ar.Destroy then pcall(function()ar:Destroy()end)end;aq[a6]=nil end;S.Objects.Caches[bI]={}end;local function bJ(v)local bI=v.key;S.Objects.Caches[bI]=S.Objects.Caches[bI]or{}local aq=S.Objects.Caches[bI]local bK=D(bI,false)if not bK then bH(bI)return end;local bL=v.getFolder()local br={}if bL then local bM=bL:GetDescendants()table.insert(bM,bL)for V,a6 in ipairs(bM)do if a6 and a6.Parent and a6:IsA(v.className)then br[a6]=true;if not aq[a6]then local bN=Drawing.new("Text")bN.Center=true;bN.Outline=true;bN.Size=A("ESP_TextSize",J.Default)bN.Text=v.getName(a6)bN.Visible=false;aq[a6]=bN end end end end;for a6,ar in pairs(aq)do if not a6.Parent or not br[a6]then if ar and ar.Remove then pcall(function()ar:Remove()end)end;aq[a6]=nil end end end;local function bO()if#S.Objects.Types==0 then return end;local bP=b.Workspace.CurrentCamera;if not bP then return end;local bQ=tick()local bR=D("ESP_LimitRange",L.Default)local bS=A("ESP_MaxRange",M.Default)if bQ-(S.Objects.LastRescan or 0)>0.5 then S.Objects.LastRescan=bQ;for V,v in ipairs(S.Objects.Types)do bJ(v)end end;local ax=d.character;local bT=ax and ax:FindFirstChild("HumanoidRootPart")for V,v in ipairs(S.Objects.Types)do local bI=v.key;local bK=D(bI,false)local aq=S.Objects.Caches[bI]if aq and bK then local bU=A(bI.."_Color",Color3.new(1,1,1))local bV=A("ESP_TextSize",J.Default)for a6,ar in pairs(aq)do if a6 and a6.Parent and ar then local bW=v.getPosition(a6)if bW then local bX=true;if bR and bT then bX=(bT.Position-bW).Magnitude<=bS end;local bY,bZ=bP:WorldToViewportPoint(bW)if bZ and bX then ar.Position=Vector2.new(bY.X,bY.Y)ar.Color=bU;ar.Size=bV;ar.Text=v.getName(a6)ar.Visible=true else ar.Visible=false end else ar.Visible=false end elseif ar then ar.Visible=false end end elseif aq then for V,ar in pairs(aq)do if ar then ar.Visible=false end end end end end;if#S.Objects.Types>0 then S.Objects.Connections.Update=r(b.RunService.RenderStepped:Connect(bO))end;for V,v in ipairs(S.Objects.Types)do aR(v.key,function()S.Objects.LastRescan=0;bJ(v)end)aR(v.key.."_Color",function()end)end;local b_=false;for c0,aM in ipairs(O)do if aM and aM.key and aM.title and aM.type and aM.Enabled~=false then local aV=aM.uiSide;if aV~="left"and aV~="right"then aV=c0%2==0 and"left"or"right"end;if aM.type=="players"then b_=true;aU(aM,aV)elseif aM.type=="sense_instances"then b_=true;bC(aM,aV)end end end;if b_ then aP()end;if h then h:Register(function()for V,aM in ipairs(O)do if aM and aM.key and aM.Enabled~=false and aM.type=="sense_instances"then bB(aM)end end;if S.SENSE then if S.SENSE.teamSettings then for V,E in pairs(S.SENSE.teamSettings)do if type(E)=="table"and E.enabled~=nil then E.enabled=false end end end;if S.SENSE.instanceSettings then S.SENSE.instanceSettings.enabled=false end;if S.SENSE.Unload then pcall(S.SENSE.Unload)end end;if S.Objects.Connections.Update then S.Objects.Connections.Update:Disconnect()S.Objects.Connections.Update=nil end;for V,v in ipairs(S.Objects.Types)do bH(v.key)end;for c0=#p,1,-1 do local a0=p[c0]p[c0]=nil;pcall(function()if a0 and a0.Disconnect then a0:Disconnect()end end)end end)end;return{ensureSense=aG}end
